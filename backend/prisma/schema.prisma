// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = "mysql://root@localhost:3306/global_distributors?connection_limit=5"
}

model User {
  id            Int     @id @default(autoincrement())
  name          String
  email         String  @unique
  contact       String
  role          String
  created_staff Staff[]
  created_shop  Shop[]
  created_type Type[]
}

model Staff {
  id                Int    @id @default(autoincrement())
  first_name        String
  last_name         String
  email             String @unique
  contact_primary   String
  contact_secondary String
  address           String
  user_id           Int
  user              User   @relation(fields: [user_id], references: [id])
}

model Shop {
  id                Int    @id @default(autoincrement())
  shop_name         String 
  owner_name        String
  address           String
  contact_primary   Int
  contact_secondary Int
  user_id           Int
  user              User   @relation(fields: [user_id], references: [id])
  sales Sale[]
}

model Sale {
  id                Int    @id @default(autoincrement())
  
  shop_id Int
  shop Shop @relation(fields: [shop_id], references: [id])
}

model Item {
  id           Int    @id @default(autoincrement())
  name         String @unique
  model        String
  priceInCents Int
  type_id Int
  type Type @relation(fields: [type_id], references: [id])
  
}

model Type {
  id           Int    @id @default(autoincrement())
  type String 
  description String 
  category String 
  items Item[]
  user_id           Int
  user              User   @relation(fields: [user_id], references: [id])

  @@unique([type, category])
}
